//Creating the Person classmodel.Person = new DataClass("People");//Add Sponsor attributes.model.Person.ID = new Attribute("storage", "uuid", "key auto");model.Person.firstName = new Attribute("storage", "string");model.Person.lastName = new Attribute("storage", "string", "btree");model.Person.fullName = new Attribute("calculated", "string");model.Person.email = new Attribute("storage", "string");model.Person.loginCode = new Attribute("storage", "string", "btree");model.Person.attendeeNumber = new Attribute("storage", "string");//login stuffmodel.Person.password = new Attribute("calculated", "string");model.Person.HA1Key = new Attribute("storage", "string", "btree");//Interest realation attr.model.Person.interestCollection = new Attribute("relatedEntities", "Interest", "person", {reversePath:true});//Calculated Attributes.model.Person.fullName.onGet = function() {	return this.firstName + " " + this.lastName; };model.Person.password.onGet = function() {	return "*****"; //could also return Null.};model.Person.password.onSet = function(value) {	this.HA1Key = directory.computeHA1(this.ID, value);};//Entity methods.model.Person.entityMethods = {};model.Person.entityMethods.validatePassword = function(password){	var ha1 = directory.computeHA1(this.ID, password);	return (ha1 === this.HA1Key); //true if validated, false otherwise.};//Class methods.model.Person.methods = {};model.Person.methods.resetPassword = function(email) {	var theRequestor = ds.Person({email: email});	//debugger;	if (theRequestor === null) {		return "We could not find your email address.";	}		if (theRequestor.email === email) {		var theEmailWorker = new SharedWorker("Workers/emailDaemon.js", "emailDaemon"),		thePort = theEmailWorker.port, // MessagePort to communicate with the email shared worker.		thePassword 			= require('utils').generatePassword(); //Let's generate the password and send it to them.				theRequestor.password  		= thePassword;		theRequestor.loginCode  	= thePassword; //Just for now so I can see the passwords. Repurpose it later. Oct 11, 2013		theRequestor.save();		//Pass the info to our email daemon so it can send the password to our new user.		thePort.postMessage({what: 'sendNewPassword', email: theRequestor.email, recipient: theRequestor.email, password: thePassword});		return "You're new password has been sent. Please check your email."	}	return theRequestor;	//return email + " this is just a test of the server class method - resetPassword.";};model.Person.methods.resetPassword.scope = "public";